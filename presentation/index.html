<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>PRESENTATION: WebGL With Three.js: Basics</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />
    <link rel="stylesheet" href="lib/css/monokai.css" />

    <link rel="stylesheet" href="style.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>WebGL With Three.js: Basics</h1>
          PRESENTATION
        </section>

        <section>
          <h2>Introduction</h2>
          <p>
            3D graphics in the browser have been a hot topic ever since it was
            first introduced. But if you were to create your apps using plain
            WebGL, it would take ages. This is exactly why some really useful
            libraries have recently came about.
          </p>
        </section>

        <section>
          <h2>Library Three.js</h2>
          <p>
            <a href="https://threejs.org/">Three.js</a> is one of the most
            popular, and I will show you how best to use it in
            order to create stunning 3D experiences for your users.
          </p>
        </section>

        <section>
          <h2>Before we start</h2>
          <p>
            Before we begin, I do expect you to have a basic understanding of 3D
            space before we start, as I won't be
            explaining stuff like coordinates, vectors, etc.
          </p>
        </section>

        <section>
          <h1>Step 1: Preparation</h1>
        </section>

        <section>
          <h2>Step 1: Preparation</h2>
          <p>
            First, create three files: <em>index.html</em>, <em>main.js</em> and
            <em>style.css</em>. Now, download
            <a href="https://threejs.org/">Three.js</a> (whole
            <a href="https://github.com/mrdoob/three.js/zipball/master">zip</a>
            file with examples and source, or the
            <a
              href="https://raw.github.com/mrdoob/three.js/master/build/three.js"
              >JavaScript</a
            >
            file alone, your choice).
          </p>
        </section>

        <section>
          <h2>Step 1: Preparation</h2>
          <p>Now, open <em>index.html</em> and insert this code:</p>
          <pre>
            <code class="html" data-trim data-line-numbers>
              &lt;!DOCTYPE html&gt;
              &lt;html&gt;
              &lt;head&gt;
                  &lt;link rel=&quot;stylesheet&quot; href=&quot;./style.css&quot;&gt;
                  &lt;script src=&quot;./three.js&quot;&gt;&lt;/script&gt;
              &lt;/head&gt;
              &lt;body&gt;
                  &lt;script src=&quot;./main.js&quot;&gt;&lt;/script&gt;
              &lt;/body&gt;
              &lt;/html&gt;
            </code>
          </pre>
        </section>
        <section>
          <h2>Step 1: Preparation</h2>
          <div>
            That's all you need in this file. Just a declaration of scripts and
            stylesheet. All the magic will happen in <em>main.js</em>, but
            before we get to that we need one more trick to make the app look
            good.
          </div>
        </section>

        <section>
          <h2>Step 1: Preparation</h2>
          <p>Open <em>style.css</em> and insert this code:</p>
          <pre>
              <code class="css" data-trim data-line-numbers>
                canvas 
                {
                  position: fixed;
                  top: 0;
                  left: 0;
                }
              </code>
           </pre>
          <p>
            This will position the canvas in the left-top corner, because by
            default the <em>body</em> will have <em>8px</em> of <em>margin</em>.
            Now we can proceed with the JavaScript code.
          </p>
        </section>

        <section>
          <h1>Step 2: The Scene and the Renderer</h1>
        </section>

        <section>
          <h2>Step 2: The Scene and the Renderer</h2>
          <p>
            <a href="https://threejs.org/">Three.js</a> uses the concept of a
            display list. This means that all objects are stored in the list and
            then drawn to the screen. Here, this is a
            <em>THREE.Scene object</em>. You need to add any object you want to
            be drawn on the screen to the scene. You can have as many scenes as
            you want, but one renderer can draw only one scene at once (of
            course you can switch the scene that is displayed).
          </p>
        </section>
        <section>
          <h2>Step 2: The Scene and the Renderer</h2>
          <p>
            The renderer simply draws everything from the scene to the WebGL
            canvas. <a href="https://threejs.org/">Three.js</a> also supports
            drawing on SVG or 2D Canvas, but we will focus on WebGL.
          </p>
        </section>
        <section>
          <h2>Step 2: The Scene and the Renderer</h2>
          <p>
            To get started, lets store the window's width and height in
            variables, we will use it later:
          </p>
          <pre>
            <code class="javascript" data-trim data-line-numbers>
              let width = window.innerWidth;
              let height = window.innerHeight;
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 2: The Scene and the Renderer</h2>
          <p>Now define the renderer and the scene:</p>
          <pre>
           <code class="javascript" data-trim data-line-numbers>
            let renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(width, height);
            document.body.appendChild(renderer.domElement);
            
            let scene = new THREE.Scene;
           </code>
        </pre>
        </section>
        <section>
          <h2>Step 2: The Scene and the Renderer</h2>
          <p>
            The first line defines the WebGL renderer. You can pass the
            renderer's options in the first argument as a map. Here, we set the
            <em>antialias</em> to true, because we want the edges of objects to
            be smooth, not jagged.
          </p>
          <p>
            The second line sets the renderer size to the size of the window,
            and in the third one we add the renderer's <em>canvas</em> element
            to the document
          </p>
          <p>The last one defines the scene, no arguments needed.</p>
        </section>

        <section>
          <h1>Step 3: The Cube</h1>
        </section>

        <section>
          <h2>Step 3: The Cube</h2>
          <p>
            Now lets add something to be drawn. Let it be a cube, since it's the
            simplest 3D object. In
            <a href="https://threejs.org/">Three.js</a> the objects that are
            being drawn on the screen are called meshes. Each mesh has to have
            its own geometry and material. Geometry is a set of points that need
            to be connected in order to create the object. Material is simply
            the paint.
          </p>
        </section>
        <section>
          <h2>Step 3: The Cube</h2>
          <p>
            So, lets create our cube. Luckily for us there are some helper
            functions in <a href="https://threejs.org/">Three.js</a> for
            creating primitives (simple shapes):
          </p>
          <pre>
            <code class="javascript" data-trim data-line-numbers>
              let cubeGeometry = new THREE.CubeGeometry(100, 100, 100);
              let cubeMaterial = new THREE.MeshLambertMaterial(
                { color: 0x1ec876 }
                );
              let cube = new THREE.Mesh(cubeGeometry, cubeMaterial);

              cube.rotation.y = Math.PI * 45 / 180;

              scene.add(cube);
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 3: The Cube</h2>
          <p>
            As you can see, first we create the geometry. The arguments are
            defining a size of the cube: the width, height and depth.
          </p>
        </section>
        <section>
          <h2>Step 3: The Cube</h2>
          <p>
            Next, we define the cube's material. There are a few material types
            in <a href="https://threejs.org/">Three.js</a>, but this time we
            will use the <em>THREE.MeshLambertMaterial</em>, since we want to
            have some lighting later (this material uses Lambert's algorithm for
            light calculations). You can pass the options in the first argument
            as a map, the same as with the renderer - this is pretty much a rule
            for more complex objects in
            <a href="https://threejs.org/">Three.js</a>. Here, we only use
            color, which is passed as a hexadecimal number.
          </p>
        </section>
        <section>
          <h2>Step 3: The Cube</h2>
          <p>
            On the third line, we create a mesh using the geometry and material
            created earlier. Next, we rotate the cube by 45 degrees on the Y
            axis, to make it look better. We have to change degrees to radians,
            which is handled by the equation you probably remember from your
            high school physics class: <em>Math.PI * 45 / 180</em>. Finally, the
            cube is added to the scene.
          </p>
        </section>
        <section>
          <h2>Step 3: The Cube</h2>
          <p>
            Now you could open <em>index.html</em> in your browser to see the
            results, but you will see nothing because the scene is not rendered
            yet.
          </p>
        </section>

        <section>
          <h1>Step 4: Camera!</h1>
        </section>

        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            To render something, first we need to add the camera to the scene,
            so the renderer knows from which point of view it should render
            stuff. There are a few types of cameras in Three.js, but you'll
            probably only use <em>THREE.PerspectiveCamera</em>.
          </p>
        </section>

        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            This type of camera is presenting the scene as we see our world.
            Lets create one:
          </p>
          <pre>
              <code class="javascript" data-trim data-line-numbers>
                let camera = 
                new THREE.PerspectiveCamera(45, width / height, 0.1, 10000);
              </code>
           </pre>
        </section>
        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            Creating the camera is a bit more complicated than the rest of the
            things we've done so far. The first argument defines the FOV (field
            of view), the angle that can be seen from where the camera is. A FOV
            of 45 degrees looks natural. Next, we define the camera's ratio.
            This is always the width of the renderer divided by its height,
            unless you want to achieve some special effects. The last two
            numbers are defining how close and how far the object can be to the
            camera to be drawn.
          </p>
        </section>
        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            Now we have to move the camera back and up a little, as all of the
            objects created in Three.js have their position set in the middle of
            the scene <em>(x: 0, y: 0, z: 0)</em> by default:
          </p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              camera.position.y = 160;
              camera.position.z = 400;
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            The <em>z</em> coordinate is positive in the direction of the
            viewer, so objects with a higher <em>z</em> position will appear
            closer to you (in this case, since we moved the camera, all of the
            objects will appear further away from you).
          </p>
        </section>

        <section>
          <h2>Step 4: Camera!</h2>
          <p>Now, lets add the camera to the scene and render it:</p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              scene.add(camera);
              renderer.render(scene, camera);
            </code>
         </pre>
          <p>
            You add the camera just like you added the cube. The next line
            renders the scene using this camera.
          </p>
        </section>

        <section>
          <h2>Step 4: Camera!</h2>
          <p>Now you can open the browser and you should see the following:</p>
          <img src="assets/pic1.jpg" />
        </section>
        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            You should only be able to see the top of the cube. This is because
            we moved the camera up and it's still looking directly in front of
            it. This can be fixed by letting the camera know on what position it
            should look. Add this line after the lines setting the position of
            the camera:
          </p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              camera.lookAt(cube.position);
            </code>
         </pre>
          <p>
            The only argument passed in is a position on which the camera will
            look.
          </p>
        </section>
        <section>
          <h2>Step 4: Camera!</h2>
          <p>
            Now, the scene looks better, but the cube is still black, no matter
            what color you've set when creating it:
          </p>
          <img src="assets/pic2.jpg" />
        </section>

        <section>
          <h1>Step 5: Lights!</h1>        
        </section>
        <section>
          <h2>Step 5: Lights!</h2>
          <p>The cube is black, because there are no lights on the scene, so it's
          like a completely black room. You see a white background because there
          is nothing to draw apart from the cube. To avoid that, we will use a
          technique called skybox. Basically, we will add a big cube that will
          display the background of the scene (usually some far terrain if it's
          open space).</p>
        </section>

        <section>
          <h2>Step 5: Lights!</h2>
          <p>
            So, lets create the box. This code should go before the
            renderer.render call:
          </p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              let skyboxGeometry = new THREE.CubeGeometry(10000, 10000, 10000);
              let  skyboxMaterial = new THREE.MeshBasicMaterial(
                { color: 0x000000, side: THREE.BackSide }
              );
              let  skybox = new THREE.Mesh(skyboxGeometry, skyboxMaterial);

              scene.add(skybox);
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 5: Lights!</h2>
          <p>
            This code is similar to the one that creates the cube. But this time
            the geometry is much bigger. We've also used
            <em>THREE.MeshBasicMaterial</em> since we don't need to light the
            skybox. Also, notice the additional argument passed to the material:
            <em>side: THREE.BackSide</em>. Since the cube will be displayed from
            the inside, we have to change the side that gets drawn (normally,
            Three.js draws only outside walls).
          </p>
        </section>
        <section>
          <h2>Step 5: Lights!</h2>
          <p>
            Now the rendered scene is completely black. To fix that we have to
            add light to the scene. We will use <em>THREE.PointLight</em>, which
            emits the light like a bulb. Add these lines after the skybox:
          </p>
          <pre>
          <code class="javascript" data-trim data-line-numbers>               
            let pointLight = new THREE.PointLight(0xffffff);
            pointLight.position.set(0, 300, 200);

            scene.add(pointLight);
          </code>
        </pre>
        </section>
        <section>
          <h2>Step 5: Lights!</h2>
          <p>
            As you can see, we've created the point light with white color, then
            we are setting its position to be up and back a little, to light the
            front and the top of the cube. Finally the light is added to the
            scene like any other object.
          </p>
        </section>
        <section>
          <h2>Step 5: Lights!</h2>
          <p>Open up the browser and you should see a colored, shaded cube:</p>
          <img src="assets/pic3.jpg" />
        </section>

        <section>
          <h1>Step 6: Action!</h1>
        </section>

        <section>
          <h2>Step 6: Action!</h2>
          <p>
            Now we will add some movement to the scene. Lets make the cube
            rotate around the Y axis. But first, we have to change the way that
            we render the scene. One renderer.render call, renders the current
            state of the scene once. So even if we animate the cube somehow, we
            will not see it move. To change that, we have to add the render loop
            to our app.
          </p>
        </section>
        <section>
          <h2>Step 6: Action!</h2>
          <p>
            This can be achieved using the renderAnimationFrame function, which
            was created specially for that purpose. It's supported in most of
            the major browsers, and for those which doesn't support it,
            <a href="https://threejs.org/">Three.js</a> comes with its own
            polyfill.
          </p>
        </section>
        <section>
          <h2>Step 6: Action!</h2>
          <p>So, lets change this:</p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              renderer.render(scene, camera);
              to this:

              function render() {
              	renderer.render(scene, camera);
	
              	requestAnimationFrame(render);
              }

              render();
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 6: Action!</h2>
          <p>
            Actually, there is no loop in there, because it would freeze the
            browser. The <em>requestAnimationFrame</em> function behaves a bit
            like <em>setTimeout</em>, but it's calling the function passed as
            quick as the browser is ready. So, nothing really changed in the
            displayed scene and the cube is still not moving. Lets fix that.
            <a href="https://threejs.org/">Three.js</a> comes with
            <em>THREE.Clock</em> which can be used to achieve smooth animation
            of objects.
          </p>
        </section>
        <section>
          <h2>Step 6: Action!</h2>
          <p>
            First, initialize it before the <em>render</em> function definition:
          </p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              let clock = new THREE.Clock;
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 6: Action!</h2>
          <p>
            Now, each time you call <em>clock.getDelta</em> it will return the
            time since the last call, in milliseconds. This can be used to
            rotate the cube like this:
          </p>
          <pre>            
            <code class="javascript" data-trim data-line-numbers>               
              cube.rotation.y -= clock.getDelta();
            </code>
         </pre>
        </section>
        <section>
          <h2>Step 6: Action!</h2>
          <p>
            Add this line between the <em>renderer.render</em> and the
            <em>requestAnimationFrame</em> calls in the
            <em>render function</em>. It's simply subtracting the time passed
            from the cube's rotation on the Y axis (remember that it's in
            radians) to rotate the cube clockwise. Now open the browser and you
            should see your cube rotating clockwise smoothly.
          </p>
        </section>

        <section>
          <h1>Conclusion</h1>
        </section>

        <section>
          <h2>Conclusion</h2>
          <p>
           You learned how to prepare the scene, add
            objects and lights, and how to animate things. You can experiment
            with the app, add more or different objects, lights. It's up to you.
             Don't forget to take a look at the
            <a href="http://threejs.org/docs/" >documentation</a> if you are having any problems.
          </p>
        </section>
        <section>
          <h1>THE END</h1>         
        </section>
        <!--
        <section>
          <h2>Slide 46</h2>
          <p>text 46</p>
        </section>
        <section>
          <h2>Slide 47</h2>
          <p>text 47</p>
        </section>
        <section>
          <h2>Slide 48</h2>
          <p>text 48</p>
        </section>
        <section>
          <h2>Slide 49</h2>
          <p>text 49</p>
        </section>
        <section>
          <h2>Slide 50</h2>
          <p>text 50</p>
        </section>
        <section>
          <h2>Slide 51</h2>
          <p>text 51</p>
        </section>
        <section>
          <h2>Slide 52</h2>
          <p>text 52</p>
        </section>
        <section>
          <h2>Slide 53</h2>
          <p>text 53</p>
        </section>
        <section>
          <h2>Slide 54</h2>
          <p>text 54</p>
        </section>
        <section>
          <h2>Slide 55</h2>
          <p>text 55</p>
        </section>
        <section>
          <h2>Slide 56</h2>
          <p>text 56</p>
        </section>
        <section>
          <h2>Slide 57</h2>
          <p>text 57</p>
        </section>
        <section>
          <h2>Slide 58</h2>
          <p>text 58</p>
        </section>
        <section>
          <h2>Slide 59</h2>
          <p>text 59</p>
        </section>
        <section>
          <h2>Slide 60</h2>
          <p>text 60</p>
        </section>
        <section>
          <h2>Slide 61</h2>
          <p>text 61</p>
        </section>
        <section>
          <h2>Slide 62</h2>
          <p>text 62</p>
        </section>
        <section>
          <h2>Slide 63</h2>
          <p>text 63</p>
        </section>
        <section>
          <h2>Slide 64</h2>
          <p>text 64</p>
        </section>
        <section>
          <h2>Slide 65</h2>
          <p>text 65</p>
        </section>
        <section>
          <h2>Slide 66</h2>
          <p>text 66</p>
        </section>
        <section>
          <h2>Slide 67</h2>
          <p>text 67</p>
        </section>
        <section>
          <h2>Slide 68</h2>
          <p>text 68</p>
        </section>
        <section>
          <h2>Slide 69</h2>
          <p>text 69</p>
        </section>
        <section>
          <h2>Slide 70</h2>
          <p>text 70</p>
        </section>
        <section>
          <h2>Slide 71</h2>
          <p>text 71</p>
        </section>
        <section>
          <h2>Slide 72</h2>
          <p>text 72</p>
        </section>
        <section>
          <h2>Slide 73</h2>
          <p>text 73</p>
        </section>
        <section>
          <h2>Slide 74</h2>
          <p>text 74</p>
        </section>
        <section>
          <h2>Slide 75</h2>
          <p>text 75</p>
        </section>
        <section>
          <h2>Slide 76</h2>
          <p>text 76</p>
        </section>
        <section>
          <h2>Slide 77</h2>
          <p>text 77</p>
        </section>-->
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>

    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
